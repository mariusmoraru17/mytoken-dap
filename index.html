<!DOCTYPE html>
<html>
<head>
  <title>MyToken - MTK</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body style="font-family: sans-serif; max-width: 500px; margin: 40px auto; text-align: center;">
  <h2>MyToken Wallet</h2>
  <button onclick="connectWallet()">üîå Connect Wallet</button>
  <p id="walletAddress"></p>
  <p><strong>Balance (MTK):</strong> <span id="balance">-</span></p>

  <h3>Send MTK</h3>
  <input id="toAddress" placeholder="Recipient address" style="width: 100%; padding: 8px;" />
  <input id="amount" placeholder="Amount" style="width: 100%; padding: 8px; margin-top: 10px;" />
  <button onclick="sendToken()" style="margin-top: 10px;">üöÄ Send</button>
  <p id="status"></p>

  <script>
    const contractAddress = "0x07d2920a5785298C22A6E462EE3Db457DF589D5E";
    const contractABI = [
      "function name() public view returns (string)",
      "function symbol() public view returns (string)",
      "function decimals() public view returns (uint8)",
      "function balanceOf(address) public view returns (uint)",
      "function transfer(address to, uint amount) public returns (bool)"
    ];

    let provider;
    let signer;
    let contract;

    async function connectWallet() {
      try {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        const address = await signer.getAddress();
        document.getElementById("walletAddress").innerText = "Connected: " + address;

        contract = new ethers.Contract(contractAddress, contractABI, signer);

        const balance = await contract.balanceOf(address);
        const decimals = await contract.decimals();
        document.getElementById("balance").innerText = ethers.utils.formatUnits(balance, decimals);
      } catch (error) {
        alert("Failed to connect wallet: " + error.message);
      }
    }

    async function sendToken() {
      try {
        const to = document.getElementById("toAddress").value;
        const amount = document.getElementById("amount").value;
        const decimals = await contract.decimals();
        const tx = await contract.transfer(to, ethers.utils.parseUnits(amount, decimals));
        document.getElementById("status").innerText = "Transaction sent: " + tx.hash;
        await tx.wait();
        document.getElementById("status").innerText = "‚úÖ Transaction confirmed!";
      } catch (error) {
        document.getElementById("status").innerText = "‚ùå Error: " + error.message;
      }
    }
  </script>
</body>
</html>
